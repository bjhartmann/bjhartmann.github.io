---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
 * sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
    "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",
    "layout/json_cv",

    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands"
;

/* -------------------- Your custom overrides below -------------------- */

.hide-title .page__title { display: none; }        /* hide big H1 on pages using classes: hide-title */
.greedy-nav .hidden-links,
.greedy-nav__toggle,
.navicon,
#theme-toggle { display: none !important; }        /* remove burger + theme icon */
.greedy-nav .visible-links { display:flex; gap:1rem; flex-wrap:wrap; }  /* allow wrapping */

.page__footer { padding: 0.5rem 0; }   

/* Slimmer reading width on pages that set classes: slim */
/* Slimmer reading width on pages that set classes: slim */
.slim .page__content {
  max-width: 50ch;
  width: auto;
  /* Do NOT override margin-left; the theme uses it to make room for the sidebar */
  margin-right: auto;
}
@media (max-width: 800px) {
  .slim .page__content { max-width: 100%; }
}

/* Indent the first non-Home tab so all tabs align with the page text */
:root {
  /* Adjust this until the tab column lines up with your main text. */
  --content-offset: 80px;
}

/* Desktop/tablet: apply the offset */
@media (min-width: 1024px) {
  .masthead .nav-offset-start { margin-left: var(--content-offset); }
}

/* Mobile: no offset so items don’t get squished */
@media (max-width: 1023px) {
  .masthead .nav-offset-start { margin-left: 0; }
}

/* -------------------- Header color system -------------------- */

/* Pick ONE of these for a calmer header blue */
:root {
  /* Muted navy (my pick) */
  --header-bg: #0f2a4a;

  /* Keep text colors */
  --header-fg: #ffffff;
  --header-fg-dim: rgba(255,255,255,.88);
  --header-hover-fg: #ffffff;
}

/* Paint the header and set link colors */
.masthead,
.masthead__inner-wrap,
.greedy-nav { background: var(--header-bg) !important; }

.masthead { border-bottom: 0 !important; box-shadow: 0 2px 6px rgba(0,0,0,.08); }

.masthead a { color: var(--header-fg-dim) !important; text-decoration: none; }
.masthead a:hover,
.masthead a:focus { color: var(--header-hover-fg) !important; }

.masthead .masthead__menu-item--lg a { color: var(--header-fg) !important; font-weight: 700; }

/* Keep same header color in dark mode (if you use it) */
html[data-theme="dark"] .masthead,
html[data-theme="dark"] .masthead__inner-wrap,
html[data-theme="dark"] .greedy-nav { background: var(--header-bg) !important; }

/* -------------------- De-pill the navigation -------------------- */

/* Final hammer: remove any pill/box treatments from nav items & links */
.masthead .greedy-nav .visible-links > li,
.masthead .greedy-nav .visible-links > li::before,
.masthead .greedy-nav .visible-links > li::after,
.masthead .greedy-nav .visible-links > li > a,
.masthead .greedy-nav .visible-links > li > a::before,
.masthead .greedy-nav .visible-links > li > a::after {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
  border-radius: 0 !important;
}

/* Keep nav text styling minimal (reads like text, not buttons) */
.masthead .greedy-nav .visible-links > li > a {
  color: var(--header-fg-dim) !important;
  padding: 0.25rem 0 !important; /* skinny, no “pill” */
  text-decoration: none;
  transition: color .12s ease;
}

/* Hover/focus/current page states */
.masthead .greedy-nav .visible-links > li > a:hover,
.masthead .greedy-nav .visible-links > li > a:focus {
  color: var(--header-hover-fg) !important;
}

.masthead .greedy-nav .visible-links > li.active > a,
.masthead .greedy-nav .visible-links > li[aria-current="page"] > a,
.masthead .greedy-nav .visible-links > li > a[aria-current="page"],
.masthead .greedy-nav .visible-links > li > a.active {
  background: transparent !important;
  box-shadow: none !important;
  color: var(--header-fg) !important; /* optional highlight for current page */
}

/* Also strip any default “button/pill” on generic masthead links */
.masthead .masthead__menu-item > a,
.masthead .masthead__menu-item > a::before,
.masthead .masthead__menu-item > a::after {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
  border-radius: 0 !important;
}

/* Brand/Home link */
.masthead .masthead__menu-item--lg > a {
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  color: var(--header-fg) !important;
}

.author__avatar { display: none !important; }

.home-portrait {
  display: block;
  max-width: 220px;   /* adjust to taste */
  width: 100%;
  height: auto;
  border-radius: 50%;
  margin: 0 0 1rem 0; /* or center: margin: 0 auto 1rem; */
}

/* Add equal spacing below the name heading in the author profile */
/* Equal spacing between name, institution, email */
.author__content h3,
.author__content .author__name { margin-bottom: 0.5rem; }
.author__content > * { margin-top: 0.5rem; }
.author__content > *:first-child { margin-top: 0; }


/* Move the whole sidebar column down by 10rem on desktop */
@media (min-width: 1024px) {
  .sidebar, .sidebar__left { padding-top: 7rem !important; }  /* <-- main nudge */
  .author__profile { margin-top: 0 !important; }               /* avoid double shift */
}



/* 2) Remove any “mystery” top margin from the first element in the main column */
.page__content > *:first-child { margin-top: 0 !important; }

/* 3) Make the page title’s spacing predictable when it’s visible */
.page__title { margin-top: 0 !important; margin-bottom: 0.5rem !important; }


/* 5) If some pages hide the big H1 (class: hide-title), keep alignment anyway */
.hide-title .page__content { padding-top: 0 !important; }
.hide-title .author__profile { margin-top: 10rem !important; }

.page__content .notice:first-child,
.page__content .toc:first-child,
.page__content .lead:first-child { margin-top: 0 !important; }

.page__meta:first-child { margin-top: 0 !important; }


