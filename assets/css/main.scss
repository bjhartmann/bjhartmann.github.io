---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
 * sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
    "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",
    "layout/json_cv",

    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands"
;

/* -------------------- Your custom overrides below -------------------- */

.hide-title .page__title { display: none; }        /* hide big H1 on pages using classes: hide-title */
.greedy-nav .hidden-links,
.greedy-nav__toggle,
.navicon,
#theme-toggle { display: none !important; }        /* remove burger + theme icon */
.greedy-nav .visible-links { display:flex; gap:1rem; flex-wrap:wrap; }  /* allow wrapping */

.page__footer { padding: 0.5rem 0; }   

/* Slimmer reading width on pages that set classes: slim */
.slim .page__content {
  max-width: 50ch;   /* you can tweak this */
  width: auto;       /* ensure width isn’t locked by earlier rules */
  margin-left: 0;
  margin-right: auto;
}

@media (max-width: 800px) {
  .slim .page__content { max-width: 100%; }
}

/* Indent the first non-Home tab so all tabs align with the page text */
:root {
  /* Adjust this until the tab column lines up with your main text. */
  --content-offset: 160px;
}

/* Desktop/tablet: apply the offset */
@media (min-width: 1024px) {
  .masthead .nav-offset-start { margin-left: var(--content-offset); }
}

/* Mobile: no offset so items don’t get squished */
@media (max-width: 1023px) {
  .masthead .nav-offset-start { margin-left: 0; }
}

/* -------------------- Header color system -------------------- */

/* Pick ONE of these for a calmer header blue */
:root {
  /* Muted navy (my pick) */
  --header-bg: #0f2a4a;

  /* Keep text colors */
  --header-fg: #ffffff;
  --header-fg-dim: rgba(255,255,255,.88);
  --header-hover-fg: #ffffff;
}

/* Paint the header and set link colors */
.masthead,
.masthead__inner-wrap,
.greedy-nav { background: var(--header-bg) !important; }

.masthead { border-bottom: 0 !important; box-shadow: 0 2px 6px rgba(0,0,0,.08); }

.masthead a { color: var(--header-fg-dim) !important; text-decoration: none; }
.masthead a:hover,
.masthead a:focus { color: var(--header-hover-fg) !important; }

.masthead .masthead__menu-item--lg a { color: var(--header-fg) !important; font-weight: 700; }

/* Keep same header color in dark mode (if you use it) */
html[data-theme="dark"] .masthead,
html[data-theme="dark"] .masthead__inner-wrap,
html[data-theme="dark"] .greedy-nav { background: var(--header-bg) !important; }

/* -------------------- De-pill the navigation -------------------- */

/* Base: remove any pill/box treatments from anchors */
.greedy-nav .visible-links a,
.masthead .masthead__menu-item > a {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
  border-radius: 0 !important;
  color: var(--header-fg-dim) !important; /* near-white text */
  text-decoration: none;
  /* keep spacing subtle so they read like text, not buttons */
  padding: 0.25rem 0 !important;
  transition: color .12s ease;
}

/* Stronger home/brand link */
.masthead .masthead__menu-item--lg > a {
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  color: var(--header-fg) !important;
}

/* Hover/focus: brighten text only (no background) */
.greedy-nav .visible-links a:hover,
.greedy-nav .visible-links a:focus,
.masthead .masthead__menu-item > a:hover,
.masthead .masthead__menu-item > a:focus {
  background: transparent !important;
  color: var(--header-hover-fg) !important;
}

/* High-specificity overrides for link states */
.masthead .greedy-nav .visible-links > li > a,
.masthead .greedy-nav .visible-links > li > a:visited,
.masthead .greedy-nav .visible-links > li > a:focus,
.masthead .greedy-nav .visible-links > li > a:active,
.masthead .greedy-nav .visible-links > li > a[aria-current="page"],
.masthead .greedy-nav .visible-links > li > a.active {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
  border-radius: 0 !important;
  padding: 0.25rem 0 !important;
  color: var(--header-fg-dim) !important;
}

/* Cover cases where the ACTIVE style is applied to the <li> */
.masthead .greedy-nav .visible-links > li.active > a,
.masthead .greedy-nav .visible-links > li[aria-current="page"] > a {
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  color: var(--header-fg) !important; /* optional: make current page full white */
}

/* -------------------- End de-pill -------------------- */
